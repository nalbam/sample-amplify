(this["webpackJsonpsample-amplify"]=this["webpackJsonpsample-amplify"]||[]).push([[0],{134:function(e,t,a){e.exports=a(547)},139:function(e,t,a){},140:function(e,t,a){},547:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(122),l=a.n(i),s=a(128),o=a(37);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(131),m=a(49),u=r.a.createContext({cart:{itemCount:0},items:[],user:null,clearCart:function(){},addItemToCart:function(e,t){},addItems:function(e){},storeUser:function(e){}}),p=function(e){var t=e.children,a={cart:{items:[]},items:[],user:null,addItemToCart:function(e,t){o((function(a){var n=Object.assign({},a);return n.cart.items.push({id:e.id,quantity:t}),Object(m.a)({},a,{cart:{items:n.cart.items}})}))},incrementItems:function(){o((function(e){return Object(m.a)({},e,{cart:{itemCount:e.cart.itemCount+1}})}))},addItems:function(e){o((function(t){return Object(m.a)({},t,{items:e})}))},storeUser:function(e){o((function(t){return Object(m.a)({},t,{user:e})}))},clearCart:function(){o((function(e){return Object(m.a)({},e,{cart:{items:[]}})}))}},i=Object(n.useState)(a),l=Object(c.a)(i,2),s=l[0],o=l[1];return r.a.createElement(u.Provider,{value:s},t)},h=a(11),d=a(12),g=a(15),v=a(13),b=a(14),f=(a(139),a(140),function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{alt:"deepracer",src:"https://deepracer-logos.s3.ap-northeast-2.amazonaws.com/logo_deepracer.png"}))),r.a.createElement("div",{className:"App-body"}))}}]),t}(n.Component)),y=a(45),w=a(31),E=a.n(w),_=a(46),N=a(30),O=a(48),k={header:"Create an Account",hiddenDefaults:["phone_number"],defaultCountryCode:"82",signUpFields:[{label:"First name",key:"given_name",required:!0,displayOrder:100,type:"string"},{label:"Last name",key:"family_name",required:!0,displayOrder:101,type:"string"}]},j=a(74),C=a.n(j),x=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).streaming=!1,a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.status(),this.intervalId=setInterval(this.status.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"status",value:function(){this.streaming&&!this.props.status&&this.stop(),!this.streaming&&this.props.status&&this.start()}},{key:"start",value:function(){this.streaming=!0,C()(".pop-layer").fadeIn()}},{key:"stop",value:function(){this.streaming=!1,C()(".pop-layer").fadeOut()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"pop-layer"},r.a.createElement("div",{className:"pop-bg"}),r.a.createElement("div",{className:"pop-container"},r.a.createElement("div",{className:"pop-title"},this.props.title),r.a.createElement("div",{className:"pop-racer"},this.props.racer),r.a.createElement("div",{className:"pop-time"},this.props.time))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={logo:"/icon-trophy.png",title:""},a.getLeague=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N.a.get("api39c9f475","/leagues/object/".concat(a.props.league)));case 2:(e=t.sent)&&e.league&&a.setState({logo:e.logo,title:e.title});case 4:case"end":return t.stop()}}))},a.getLeague(),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{alt:"deepracer",src:this.state.logo})),r.a.createElement("h1",{className:"title"},this.state.title))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={league_valid:!1,league:"",logo_valid:!1,logo:"",popup:!1,title_valid:!1,title:""},a.postLeague=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("post api"),t.next=3,E.a.awrap(N.a.post("api39c9f475","/leagues",{body:{league:a.state.league,logo:a.state.logo,title:a.state.title}}));case 3:e=t.sent,console.log("post api: "+JSON.stringify(e,null,2)),a.setState({popup:!0}),setTimeout(function(){this.setState({popup:!1})}.bind(Object(_.a)(a)),3e3),a.setState({league:"",logo:"",title:""});case 8:case"end":return t.stop()}}))},a.handleChange=function(e){if("league"===e.target.name){var t=""!==e.target.value&&a.validateString(e.target.value);a.setState({league:e.target.value,league_valid:t}),a.setColor(e.target,t)}if("title"===e.target.name){var n=""!==e.target.value;a.setState({title:e.target.value,title_valid:n}),a.setColor(e.target,n)}if("logo"===e.target.name){var r=""!==e.target.value&&a.validateUrl(e.target.value);a.setState({logo:e.target.value,logo_valid:r}),a.setColor(e.target,r)}a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){return e.preventDefault(),a.state.league_valid&&a.state.logo_valid&&a.state.title_valid&&a.postLeague(),!1},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"validateString",value:function(e){return/^[a-z]+[a-z0-9-_]{5,19}$/g.test(e)}},{key:"validateUrl",value:function(e){return/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/g.test(e)}},{key:"setColor",value:function(e,t){t?(e.classList.add("text_normal"),e.classList.remove("text_red")):(e.classList.remove("text_normal"),e.classList.add("text_red"))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-header auth"},r.a.createElement(O.a,{usernameAttributes:"email"})),r.a.createElement("header",{className:"App-header"},r.a.createElement(A,{league:this.props.match.params.league})),r.a.createElement("div",{className:"App-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"lb-submit"},r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"League"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"league",value:this.state.league,placeholder:"",onChange:this.handleChange,className:"lb-email text_normal",autoComplete:"off",maxLength:"20"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"Title"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"title",value:this.state.title,placeholder:"",onChange:this.handleChange,className:"lb-time text_normal",autoComplete:"off",maxLength:"128"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"Logo"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"logo",value:this.state.logo,placeholder:"",onChange:this.handleChange,className:"lb-name text_normal",autoComplete:"off",maxLength:"256"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"lb-btn-submit"},"Submit")))))),r.a.createElement(x,{status:this.state.popup,racer:"Saved!"}))}}]),t}(n.Component),T=Object(O.b)(S,{usernameAttributes:"email",signUpConfig:k}),I=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={alpha:.8,count:300,frameInterval:15,gradient:!1,speed:2},a.supportsAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,a.colors=["rgba(30,144,255,","rgba(107,142,35,","rgba(255,215,0,","rgba(255,192,203,","rgba(106,90,205,","rgba(173,216,230,","rgba(238,130,238,","rgba(152,251,152,","rgba(70,130,180,","rgba(244,164,96,","rgba(210,105,30,","rgba(220,20,60,"],a.context=null,a.lastFrameTime=Date.now(),a.particles=[],a.streaming=!1,a.timeout=5e3,a.waveAngle=0,a.animate=function(e){if(0===a.particles.length)e.clearRect(0,0,window.innerWidth,window.innerHeight);else{var t=Date.now(),n=t-a.lastFrameTime;(!a.supportsAnimationFrame||n>a.state.frameInterval)&&(e.clearRect(0,0,window.innerWidth,window.innerHeight),a.update(),a.draw(e),a.lastFrameTime=t-n%a.state.frameInterval)}requestAnimationFrame((function(){return a.animate(e)}))},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.init(),this.status(),this.intervalId=setInterval(this.status.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"status",value:function(){this.streaming&&!this.props.status&&this.stop(),!this.streaming&&this.props.status&&this.start()}},{key:"init",value:function(){var e=window.innerWidth,t=window.innerHeight,a=document.getElementById("pollen-canvas");null===a?((a=document.createElement("canvas")).setAttribute("id","pollen-canvas"),a.setAttribute("style","display:block;z-index:999999;pointer-events:none;position:fixed;top:0"),document.body.prepend(a),a.width=e,a.height=t,window.addEventListener("resize",(function(){a.width=window.innerWidth,a.height=window.innerHeight}),!0),this.context=a.getContext("2d")):null===this.context&&(this.context=a.getContext("2d")),this.animate(this.context)}},{key:"start",value:function(){this.streaming=!0;for(var e=window.innerWidth,t=window.innerHeight;this.particles.length<this.state.count;)this.particles.push(this.particle(e,t))}},{key:"stop",value:function(){this.streaming=!1}},{key:"particle",value:function(e,t){return{color1:this.colors[Math.random()*this.colors.length|0]+(this.state.alpha+")"),color2:this.colors[Math.random()*this.colors.length|0]+(this.state.alpha+")"),diameter:10*Math.random()+10,tilt:10*Math.random()-10,tiltAngle:Math.random()*Math.PI,tiltAngleIncrement:.07*Math.random()+.05,x:Math.random()*e,y:Math.random()*t-t}}},{key:"update",value:function(){for(var e,t=window.innerWidth,a=window.innerHeight,n=0;n<this.particles.length;n++)e=this.particles[n],!this.streaming&&e.y<-15?e.y=a+100:(e.y+=.5*(e.diameter+this.state.speed),e.tiltAngle+=e.tiltAngleIncrement,e.tilt=15*Math.sin(e.tiltAngle)),e.y>a&&(this.streaming?this.particles[n]=this.particle(t,a):(this.particles.splice(n,1),n--))}},{key:"draw",value:function(e){for(var t,a,n,r,i=0;i<this.particles.length;i++){if(t=this.particles[i],e.beginPath(),e.lineWidth=t.diameter,a=(n=t.x+t.tilt)+t.diameter/2,r=t.y+t.tilt+t.diameter/2,this.state.gradient){var l=e.createLinearGradient(a,t.y,n,r);l.addColorStop("0.0",t.color1),l.addColorStop("1.0",t.color2),e.strokeStyle=l}else e.strokeStyle=t.color1;e.moveTo(a,t.y),e.lineTo(n,r),e.stroke()}}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"canvas",className:"pollen"}))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={rank:0},a.state.rank=a.props.rank+1,a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e="";return this.state.rank<4&&(e=r.a.createElement("img",{src:"/icon-trophy.png",alt:"trophy",className:"icon-trophy"})),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"lb-row lb-rank1"},r.a.createElement("div",null,e," ",this.state.rank),r.a.createElement("div",null,this.props.item.racerName),r.a.createElement("div",null,this.props.item.laptime)))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={items:[],pollen:!1,popRacer:"",popTime:"",popTitle:"",popup:!1},a.getTimes=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N.a.get("apiefea82cc","/items/".concat(a.props.league)));case 2:(e=t.sent)&&e.length>0&&a.reloaded(e);case 4:case"end":return t.stop()}}))},a.getTimes(),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.getTimes.bind(this),1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"reloaded",value:function(e){var t=e.sort(this.compare);if(t.length<this.state.items.length)this.setState({items:t});else{var a,n,r,i=!1;this.state.items.length>0&&t.length>this.state.items.length&&(i=!0);for(var l=0;l<this.state.items.length;l++)if(this.state.items[l].racerName!==t[l].racerName||this.state.items[l].laptime!==t[l].laptime){a=l+1,n=t[l].racerName,r=t[l].laptime;break}i&&!n&&(n=t[(a=t.length)-1].racerName,r=t[a-1].laptime),this.setState({items:t}),n&&(console.log("new ".concat(a," ").concat(n," ").concat(r)),i?this.setState({popTitle:"New Challenger!"}):this.setState({popTitle:"New Record!"}),this.setState({popRacer:n,popTime:r}),this.popup(a))}}},{key:"popup",value:function(e){this.scroll(e),this.setState({pollen:!0}),setTimeout(function(){this.setState({popup:!0})}.bind(this),1e3),setTimeout(function(){this.setState({pollen:!1})}.bind(this),5e3),setTimeout(function(){this.setState({popup:!1})}.bind(this),6e3)}},{key:"scroll",value:function(e){}},{key:"compare",value:function(e,t){var a=e.laptime.split(":"),n=t.laptime.split(":"),r=60*+a[0]+ +a[1],i=60*+n[0]+ +n[1];return r<i?-1:r>i?1:0}},{key:"render",value:function(){var e=this.state.items.map((function(e,t){return r.a.createElement(L,{key:t,rank:t,item:e})}));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"lb-items"},r.a.createElement("div",{className:"lb-header"},r.a.createElement("div",null,"Rank"),r.a.createElement("div",null,"Name"),r.a.createElement("div",null,"Time")),e),r.a.createElement("div",{className:"pop-logo"},r.a.createElement("div",{className:"pop-container"},r.a.createElement("div",{className:"lb-logo-back"},r.a.createElement("img",{alt:"trophy",src:"/icon-trophy.png"})))),r.a.createElement(I,{status:this.state.pollen}),r.a.createElement(x,{status:this.state.popup,title:this.state.popTitle,racer:this.state.popRacer,time:this.state.popTime}),r.a.createElement("footer",{className:"lb-footer"}))}}]),t}(n.Component),z=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(A,{league:this.props.match.params.league})),r.a.createElement("div",{className:"App-body"},r.a.createElement(F,{league:this.props.match.params.league})))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={email_valid:!1,email:"",laptime_valid:!1,laptime:"",popup:!1,racerName_valid:!1,racerName:""},a.postLapTime=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("post api"),t.next=3,E.a.awrap(N.a.post("apiefea82cc","/items",{body:{league:a.props.match.params.league,email:a.state.email,racerName:a.state.racerName,laptime:a.state.laptime}}));case 3:e=t.sent,console.log("post api: "+JSON.stringify(e,null,2)),a.setState({popup:!0}),setTimeout(function(){this.setState({popup:!1})}.bind(Object(_.a)(a)),3e3),a.setState({email:"",racerName:"",laptime:""});case 8:case"end":return t.stop()}}))},a.handleChange=function(e){if("email"===e.target.name){var t=""!==e.target.value&&a.validateEmail(e.target.value);a.setState({email:e.target.value,email_valid:t}),a.setColor(e.target,t)}if("racerName"===e.target.name){var n=""!==e.target.value;a.setState({racerName:e.target.value,racerName_valid:n}),a.setColor(e.target,n)}if("laptime"===e.target.name){var r=""!==e.target.value&&a.validateTime(e.target.value);a.setState({laptime:e.target.value,laptime_valid:r}),a.setColor(e.target,r)}a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){return e.preventDefault(),a.state.email_valid&&a.state.racerName_valid&&a.state.laptime_valid&&a.postLapTime(),!1},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\].,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"validateTime",value:function(e){return/^([0-9]{2}:[0-9]{2}\.[0-9]{3})$/.test(e)}},{key:"setColor",value:function(e,t){t?(e.classList.add("text_normal"),e.classList.remove("text_red")):(e.classList.remove("text_normal"),e.classList.add("text_red"))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-header auth"},r.a.createElement(O.a,{usernameAttributes:"email"})),r.a.createElement("header",{className:"App-header"},r.a.createElement(A,{league:this.props.match.params.league})),r.a.createElement("div",{className:"App-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"hidden",name:"league",value:this.props.match.params.league}),r.a.createElement("div",{className:"lb-submit"},r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"Email"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"email",value:this.state.email,placeholder:"",onChange:this.handleChange,className:"lb-email text_normal",autoComplete:"off",maxLength:"256"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"Name"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"racerName",value:this.state.racerName,placeholder:"",onChange:this.handleChange,className:"lb-name text_normal",autoComplete:"off",maxLength:"32"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null,"Time"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"laptime",value:this.state.laptime,placeholder:"00:00.000",onChange:this.handleChange,className:"lb-time text_normal",autoComplete:"off",maxLength:"9"}))),r.a.createElement("div",{className:"lb-row"},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"lb-btn-submit"},"Submit")))))),r.a.createElement(x,{status:this.state.popup,racer:"Saved!"}))}}]),t}(n.Component),q=Object(O.b)(M,{usernameAttributes:"email",signUpConfig:k}),W={aws_project_region:"ap-northeast-2",aws_cognito_identity_pool_id:"ap-northeast-2:5f2dbfd7-eb14-4515-b887-c2407f4447da",aws_cognito_region:"ap-northeast-2",aws_user_pools_id:"ap-northeast-2_3vCldMd4q",aws_user_pools_web_client_id:"52blovslq6qsud2ums7e5udfor",oauth:{},aws_content_delivery_bucket:"sample-amplify-20200130134244-hostingbucket-demo",aws_content_delivery_bucket_region:"ap-northeast-2",aws_content_delivery_url:"http://sample-amplify-20200130134244-hostingbucket-demo.s3-website.ap-northeast-2.amazonaws.com",aws_mobile_analytics_app_id:"9cf79dc21d80464292b4470586d51f10",aws_mobile_analytics_app_region:"us-west-2",aws_dynamodb_all_tables_region:"ap-northeast-2",aws_dynamodb_table_schemas:[{tableName:"sample-amplify-leagues-demo",region:"ap-northeast-2"},{tableName:"sample-amplify-times-demo",region:"ap-northeast-2"}],aws_cloud_logic_custom:[{name:"api39c9f475",endpoint:"https://0ibdkg6mij.execute-api.ap-northeast-2.amazonaws.com/demo",region:"ap-northeast-2"},{name:"apiefea82cc",endpoint:"https://qxoos5din6.execute-api.ap-northeast-2.amazonaws.com/demo",region:"ap-northeast-2"}]};N.c.configure(W),N.b.record("Page_Load"),N.b.autoTrack("pageView",{enable:!0,type:"SPA"});var R=r.a.createElement(p,null,r.a.createElement(s.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:f}),r.a.createElement(o.a,{path:"/create",component:T}),r.a.createElement(o.a,{path:"/league/:league",component:z}),r.a.createElement(o.a,{path:"/submit/:league",component:q}),r.a.createElement(o.a,{component:f}))));l.a.render(R,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t){}},[[134,1,2]]]);
//# sourceMappingURL=main.4ef0b598.chunk.js.map